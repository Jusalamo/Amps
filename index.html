<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Amps | Amplify Your Connections at Live Events</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" id="manifest">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Amps">
    
    <style>
        /* ===== BASE STYLES ===== */
        :root {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-tertiary: #161616;
            --bg-card: rgba(30, 30, 30, 0.7);
            --bg-glass: rgba(255, 255, 255, 0.05);
            
            /* Profile Card Colors */
            --card-purple: #8B5CF6;
            --card-pink: #EC4899;
            --card-blue: #3B82F6;
            --card-green: #10B981;
            --card-yellow: #F59E0B;
            --card-orange: #F97316;
            --card-red: #EF4444;
            --card-teal: #14B8A6;
            --card-indigo: #6366F1;
            --card-lavender: #C4B5FD;
            --card-pastel-pink: #FFC0D9;
            --card-pastel-blue: #BAE6FD;
            --card-mint: #BBF7D0;
            --card-peach: #FECACA;
            
            --primary: #8B5CF6;
            --primary-light: #A78BFA;
            --primary-dark: #7C3AED;
            --primary-glow: rgba(139, 92, 246, 0.3);
            
            --accent-green: #10B981;
            --accent-red: #EF4444;
            --accent-yellow: #F59E0B;
            --accent-blue: #3B82F6;
            --accent-gold: #F5DEB3;
            
            --pro-gradient: linear-gradient(135deg, #8B5CF6, #EC4899, #F59E0B);
            --pro-plus-gradient: linear-gradient(135deg, #F59E0B, #8B5CF6, #EC4899);
            
            --white: #FFFFFF;
            --gray-100: #F1F5F9;
            --gray-200: #E2E8F0;
            --gray-300: #CBD5E1;
            --gray-400: #8E8E93;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1C1C1E;
            --gray-900: #2C2C2E;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.5);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.6), 0 10px 10px -5px rgba(0, 0, 0, 0.4);
            --shadow-glow: 0 0 30px rgba(139, 92, 246, 0.4);
            --shadow-card-stack: 0 20px 60px rgba(0, 0, 0, 0.4), 0 8px 24px rgba(0, 0, 0, 0.3);
            --shadow-gold: 0 8px 24px rgba(245, 222, 179, 0.3);
            
            /* Border Radius System */
            --radius-sm: 8px;
            --radius: 12px;
            --radius-md: 16px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            --radius-2xl: 32px;
            --radius-full: 9999px;
            
            /* Notched Corners */
            --notch-tl: 32px 32px 8px 8px;
            --notch-tr: 8px 32px 32px 8px;
            --notch-bl: 8px 8px 32px 32px;
            --notch-br: 32px 8px 8px 32px;
            
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
            
            --header-height: 64px;
            --bottom-nav-height: 65px;
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--white);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            min-height: 100vh;
            padding-bottom: calc(var(--bottom-nav-height) + var(--safe-area-inset-bottom));
        }
        
        .app {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--bg-primary);
            position: relative;
            overflow: hidden;
        }
        
        /* ===== DECORATIVE BACKGROUNDS ===== */
        .hero-bg {
            position: absolute;
            inset: 0;
            opacity: 0.08;
            pointer-events: none;
            z-index: 0;
            background: radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
        }
        
        .for-you-bg {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%) translateY(-40px);
            font-size: clamp(80px, 15vw, 180px);
            font-weight: 700;
            color: #3A3A3C;
            opacity: 0.08;
            letter-spacing: 0.05em;
            white-space: nowrap;
            pointer-events: none;
            z-index: 0;
        }
        
        /* ===== TYPOGRAPHY ===== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--white);
        }
        
        h2 { font-size: 1.875rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }
        
        .text-gradient {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .pro-gradient {
            background: var(--pro-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .pro-plus-gradient {
            background: var(--pro-plus-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: var(--radius-xl);
            font-weight: 600;
            font-size: 14px;
            text-decoration: none;
            cursor: pointer;
            border: none;
            transition: all var(--transition);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .btn-primary {
            background: var(--primary);
            color: var(--white);
            box-shadow: var(--shadow-glow);
        }
        
        .btn-primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow), 0 8px 25px rgba(139, 92, 246, 0.3);
        }
        
        .btn-pro {
            background: var(--pro-gradient);
            color: var(--white);
            background-size: 200% 200%;
            animation: gradientMove 3s ease infinite;
            box-shadow: 0 0 30px rgba(236, 72, 153, 0.3);
        }
        
        .btn-pro:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 40px rgba(236, 72, 153, 0.4);
        }
        
        .btn-pro-plus {
            background: var(--pro-plus-gradient);
            color: var(--white);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--white);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .btn-glass {
            background: var(--bg-glass);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
        }
        
        .btn-glass:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .btn-large {
            padding: 16px 32px;
            font-size: 16px;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .btn-icon {
            width: 48px;
            height: 48px;
            padding: 0;
            border-radius: var(--radius-full);
            font-size: 20px;
        }
        
        /* ===== NOTCHED ELEMENTS ===== */
        .notched-tl {
            border-radius: var(--notch-tl);
        }
        
        .notched-tr {
            border-radius: var(--notch-tr);
        }
        
        .notched-bl {
            border-radius: var(--notch-bl);
        }
        
        .notched-br {
            border-radius: var(--notch-br);
        }
        
        /* ===== NAVIGATION ===== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: var(--header-height);
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            backdrop-filter: blur(20px);
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 24px;
            font-weight: 800;
            cursor: pointer;
        }
        
        .nav-brand .amp {
            background: var(--pro-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .nav-brand .s {
            color: var(--white);
        }
        
        .nav-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .back-btn {
            background: none;
            border: none;
            color: var(--white);
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-full);
            transition: background var(--transition-fast);
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* ===== BOTTOM NAVIGATION ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: calc(var(--bottom-nav-height) + var(--safe-area-inset-bottom));
            background: rgba(0, 0, 0, 0.98);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: var(--safe-area-inset-bottom);
            z-index: 999;
            max-width: 480px;
            margin: 0 auto;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 12px;
            background: none;
            border: none;
            color: var(--gray-400);
            font-size: 12px;
            transition: all var(--transition-fast);
            flex: 1;
            height: 100%;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item i {
            font-size: 20px;
        }
        
        /* ===== CONTENT CONTAINER ===== */
        .content {
            padding: calc(var(--header-height) + 20px) 20px 20px;
            min-height: 100vh;
        }
        
        /* ===== CARD COMPONENTS ===== */
        .card {
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-2xl);
            padding: 24px;
            backdrop-filter: blur(20px);
            transition: all var(--transition);
        }
        
        .card:hover {
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-glass {
            background: var(--bg-glass);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-2xl);
            padding: 24px;
            backdrop-filter: blur(20px);
        }
        
        /* ===== BADGES ===== */
        .pro-badge {
            background: var(--pro-gradient);
            color: white;
            padding: 6px 16px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .pro-plus-badge {
            background: var(--pro-plus-gradient);
            color: white;
            padding: 6px 16px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .free-badge {
            background: var(--bg-tertiary);
            color: var(--gray-400);
            padding: 6px 16px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .live-badge {
            background: var(--accent-green);
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            animation: pulse 2s infinite;
        }
        
        /* ===== LANDING PAGE ===== */
        .hero {
            text-align: center;
            padding: 40px 0;
            position: relative;
            z-index: 1;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            line-height: 1.1;
        }
        
        .hero-subtitle {
            font-size: 1.25rem;
            margin-bottom: 40px;
            color: var(--gray-400);
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 60px 0;
        }
        
        .feature {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-2xl);
            padding: 24px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition);
        }
        
        .feature:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: var(--shadow-glow);
        }
        
        .feature-icon {
            width: 56px;
            height: 56px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            font-size: 24px;
            color: var(--primary-light);
        }
        
        .cta-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin: 40px 0;
        }
        
        /* ===== PROFILE CARDS ===== */
        .card-stack {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }
        
        .card-container {
            width: 100%;
            max-width: 280px;
            aspect-ratio: 3/4;
            position: relative;
        }
        
        .profile-card {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s;
            cursor: grab;
            z-index: 1;
            border-radius: var(--radius-xl);
            overflow: hidden;
        }
        
        .profile-card:active {
            cursor: grabbing;
        }
        
        .card-content {
            position: relative;
            width: 100%;
            height: 100%;
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-card-stack);
        }
        
        .card-frame {
            position: absolute;
            width: 110%;
            height: 110%;
            top: -8%;
            left: -5%;
            background: var(--accent-gold);
            border-radius: var(--radius-xl);
            transform: rotate(-3deg);
            z-index: -1;
            box-shadow: var(--shadow-gold);
        }
        
        .profile-image {
            width: 85%;
            aspect-ratio: 1/1;
            margin: 24px auto 0;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .profile-info {
            padding: 20px 24px;
            text-align: center;
        }
        
        .profile-info h2 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            color: var(--gray-800);
            font-weight: 700;
            letter-spacing: -0.02em;
        }
        
        .profile-info p {
            font-size: 13px;
            color: var(--gray-600);
            margin-bottom: 16px;
            line-height: 1.5;
        }
        
        .interests {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .interest-tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 12px;
            background: rgba(28, 28, 30, 0.08);
            color: var(--gray-600);
            font-weight: 600;
        }
        
        /* ===== SWIPE OVERLAYS ===== */
        .swipe-overlay {
            position: absolute;
            top: 50px;
            right: -40px;
            width: 120px;
            height: 50px;
            border: 4px solid var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 24px;
            border-radius: 12px;
            z-index: 100;
            transform: rotate(12deg);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .swipe-overlay.like {
            background: var(--accent-green);
            left: -40px;
            right: auto;
            transform: rotate(-12deg);
        }
        
        .swipe-overlay.nope {
            background: var(--accent-red);
            transform: rotate(12deg);
        }
        
        .swipe-overlay.super {
            background: var(--accent-blue);
            top: 80px;
            transform: rotate(0deg);
        }
        
        /* ===== SWIPE ACTIONS ===== */
        .swipe-actions {
            padding: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            z-index: 50;
        }
        
        .action-button {
            width: 72px;
            height: 72px;
            border-radius: var(--radius-full);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s;
            background: var(--gray-900);
            color: var(--white);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }
        
        .action-button:hover {
            transform: scale(1.05);
        }
        
        .action-button:active {
            transform: scale(0.95);
        }
        
        .action-button.undo {
            width: 64px;
            height: 64px;
            font-size: 20px;
            background: var(--gray-400);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .action-button.like {
            width: 80px;
            height: 80px;
            background: var(--card-pink);
            color: var(--white);
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.5);
        }
        
        .action-button.like:hover {
            transform: scale(1.1);
        }
        
        /* ===== STATS CARDS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: var(--bg-tertiary);
            border-radius: var(--radius-lg);
            padding: 16px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--gray-400);
        }
        
        /* ===== QUICK ACTIONS ===== */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin: 32px 0;
        }
        
        .action-card {
            background: var(--bg-card);
            border-radius: var(--radius-2xl);
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all var(--transition);
        }
        
        .action-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: var(--shadow-glow);
        }
        
        .action-card i {
            font-size: 32px;
            margin-bottom: 12px;
        }
        
        .action-card.primary i { color: var(--primary); }
        .action-card.blue i { color: var(--card-blue); }
        .action-card.pink i { color: var(--card-pink); }
        .action-card.gold i { color: var(--accent-gold); }
        
        /* ===== EVENT CARDS ===== */
        .events-grid {
            display: grid;
            gap: 16px;
            margin-top: 24px;
        }
        
        .event-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--notch-tl);
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .event-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }
        
        .event-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 0 0 32px 0;
            opacity: 0.1;
        }
        
        .event-info {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray-400);
            font-size: 14px;
            margin: 8px 0;
        }
        
        /* ===== AUTH PAGE ===== */
        .auth-container {
            max-width: 400px;
            margin: 0 auto;
            padding: 40px 0;
        }
        
        .auth-tabs {
            display: flex;
            background: var(--bg-tertiary);
            border-radius: var(--radius);
            padding: 4px;
            margin-bottom: 32px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: none;
            border: none;
            color: var(--gray-400);
            font-weight: 600;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }
        
        .auth-tab.active {
            background: var(--primary);
            color: var(--white);
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--gray-300);
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-tertiary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-xl);
            color: var(--white);
            font-size: 16px;
            transition: all var(--transition-fast);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-glow);
        }
        
        /* ===== ATTENDEE LIST ===== */
        .attendee-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        
        .attendee-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .attendee-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--primary);
        }
        
        .attendee-info {
            flex: 1;
        }
        
        .attendee-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }
        
        .status-online {
            color: var(--accent-green);
        }
        
        .status-away {
            color: var(--accent-yellow);
        }
        
        /* ===== CHAT ===== */
        .chat-container {
            height: calc(100vh - var(--header-height) - var(--bottom-nav-height));
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-secondary);
        }
        
        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            background-size: cover;
            background-position: center;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .message {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            animation: messageAppear 0.3s ease;
        }
        
        .message.sent {
            background: var(--primary);
            color: var(--white);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            border-radius: 18px 18px 4px 18px;
        }
        
        .message.received {
            background: var(--bg-tertiary);
            color: var(--white);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            border-radius: 18px 18px 18px 4px;
        }
        
        .message-time {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 4px;
            text-align: right;
        }
        
        .chat-input {
            padding: 16px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 12px;
            background: var(--bg-secondary);
        }
        
        /* ===== PRICING CARDS ===== */
        .pricing-grid {
            display: grid;
            gap: 20px;
            margin: 32px 0;
        }
        
        .pricing-card {
            background: var(--bg-card);
            border-radius: var(--radius-2xl);
            padding: 32px 24px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            transition: all var(--transition);
        }
        
        .pricing-card.featured {
            border: 2px solid var(--primary);
            transform: scale(1.05);
            box-shadow: var(--shadow-glow);
        }
        
        .pricing-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .pricing-card.featured:hover {
            transform: scale(1.05) translateY(-4px);
        }
        
        .pricing-badge {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 20px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 700;
        }
        
        /* ===== SCANNER ===== */
        .scanner-container {
            text-align: center;
            padding: 20px 0;
        }
        
        .qr-scanner {
            width: 100%;
            height: 300px;
            background: var(--bg-secondary);
            border-radius: var(--radius-2xl);
            margin: 24px 0;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .scanner-overlay {
            position: absolute;
            inset: 20px;
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            animation: pulse 2s infinite;
        }
        
        .scanner-line {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            height: 2px;
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
            animation: scan 3s infinite linear;
        }
        
        /* ===== CAMERA MODAL ===== */
        .camera-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .camera-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: #000;
        }
        
        .camera-preview {
            flex: 1;
            position: relative;
            overflow: hidden;
        }
        
        .camera-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .camera-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 250px;
            border: 3px solid white;
            border-radius: var(--radius-lg);
            box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.7);
        }
        
        .camera-controls {
            padding: 20px;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }
        
        .camera-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            color: black;
        }
        
        /* ===== PRO/MATCH MODALS ===== */
        .pro-modal, .match-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .pro-content, .match-content {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            border-radius: var(--radius-2xl);
            padding: 48px 32px;
            text-align: center;
            max-width: 320px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: modalAppear 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .match-images {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .match-avatar {
            width: 96px;
            height: 96px;
            border-radius: var(--radius-full);
            border: 4px solid var(--primary);
            box-shadow: var(--shadow-lg);
            background-size: cover;
            background-position: center;
        }
        
        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 12px 20px;
            border-radius: var(--radius-lg);
            background: var(--primary);
            color: var(--white);
            font-weight: 500;
            z-index: 3000;
            animation: slideIn 0.3s ease-out;
            max-width: 300px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* ===== ANIMATIONS ===== */
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes scan {
            0% { top: 20px; }
            50% { top: calc(100% - 22px); }
            100% { top: 20px; }
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* ===== UTILITY CLASSES ===== */
        .text-center { text-align: center; }
        .mt-1 { margin-top: 4px; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 16px; }
        .mt-4 { margin-top: 24px; }
        .mt-5 { margin-top: 32px; }
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 16px; }
        .mb-4 { margin-bottom: 24px; }
        .mb-5 { margin-bottom: 32px; }
        .hidden { display: none !important; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        .gap-5 { gap: 20px; }
        .w-full { width: 100%; }
        .cursor-pointer { cursor: pointer; }
        .relative { position: relative; }
        
        /* ===== AVATAR ===== */
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            margin: 0 auto 16px;
            position: relative;
            overflow: hidden;
            border: 3px solid var(--bg-primary);
            background-size: cover;
            background-position: center;
        }
        
        .avatar.pro {
            border: 3px solid transparent;
            border-image: var(--pro-gradient) 1;
        }
        
        .avatar.pro-plus {
            border: 3px solid transparent;
            border-image: var(--pro-plus-gradient) 1;
        }
        
        /* ===== EVENT BADGE ===== */
        .event-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* ===== CREATE EVENT ===== */
        .create-form {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .qr-code-display {
            width: 200px;
            height: 200px;
            background: var(--white);
            border-radius: var(--radius);
            margin: 24px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: var(--bg-primary);
            font-weight: bold;
            text-align: center;
            padding: 20px;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .content {
                padding: calc(var(--header-height) + 16px) 16px 16px;
            }
            
            .navbar {
                padding: 0 16px;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @supports (padding: max(0px)) {
            .bottom-nav {
                padding-bottom: max(var(--safe-area-inset-bottom), 20px);
            }
        }
    </style>
</head>
<body>
    <div class="app" id="app">
        <!-- Navigation will be injected here -->
        <div class="content" id="content">
            <!-- Content will be dynamically loaded here -->
        </div>
        
        <!-- Bottom Navigation will be injected here -->
        <div id="bottomNav"></div>
    </div>

    <!-- Camera Modal -->
    <div class="camera-modal" id="cameraModal">
        <div class="camera-container">
            <div class="camera-preview">
                <video class="camera-video" id="cameraVideo" autoplay playsinline></video>
                <div class="camera-overlay"></div>
                <div class="live-badge" style="position: absolute; top: 16px; right: 16px;">
                    <i class="fas fa-camera"></i>
                    <span>LIVE PHOTO</span>
                </div>
            </div>
            <div class="camera-controls">
                <button class="btn btn-outline" onclick="closeCamera()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="camera-btn" onclick="takePhoto()">
                    <i class="fas fa-camera"></i>
                </button>
                <button class="btn btn-outline" onclick="switchCamera()">
                    <i class="fas fa-sync-alt"></i> Flip
                </button>
            </div>
        </div>
    </div>

    <!-- Pro Upgrade Modal -->
    <div class="pro-modal" id="proModal">
        <div class="pro-content">
            <div class="text-center mb-6">
                <div class="pro-badge mb-4" style="font-size: 14px; padding: 8px 16px;">
                    <i class="fas fa-crown"></i>
                    <span>UPGRADE TO PRO</span>
                </div>
                <h2 class="pro-gradient">Unlock Premium Features</h2>
                <p class="mt-2">Get unlimited swipes, create events, and more!</p>
            </div>

            <div class="flex flex-col gap-4 mb-6">
                <div class="card-glass">
                    <h4 class="mb-2">Unlimited Daily Swipes</h4>
                    <p class="text-gray-400">Free users limited to 30 swipes/day per event</p>
                </div>
                
                <div class="card-glass">
                    <h4 class="mb-2">Create Unlimited Events</h4>
                    <p class="text-gray-400">Free users can create 3 events/month</p>
                </div>
                
                <div class="card-glass">
                    <h4 class="mb-2">See Who Liked You</h4>
                    <p class="text-gray-400">Free users can't see who liked them</p>
                </div>
                
                <div class="card-glass">
                    <h4 class="mb-2">Video Calls & Read Receipts</h4>
                    <p class="text-gray-400">Pro-exclusive features</p>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="mb-4 text-center">Choose Plan</h4>
                <div class="flex flex-col gap-3">
                    <div class="pricing-card">
                        <div class="pro-badge mb-4">PRO</div>
                        <h3 class="text-center mb-2">$14.99/month</h3>
                        <p class="text-center text-gray-400 mb-4">or $99.99/year (save 44%)</p>
                        <div class="flex flex-col gap-2 mb-4">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Unlimited likes</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>5 super likes/day</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>See who liked you</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Video calls</span>
                            </div>
                        </div>
                        <button class="btn btn-pro btn-block" onclick="upgradeToPro()">
                            <i class="fas fa-crown"></i> Upgrade Now
                        </button>
                    </div>
                    
                    <div class="pricing-card featured">
                        <div class="pro-plus-badge mb-4">PRO PLUS</div>
                        <h3 class="text-center mb-2 pro-plus-gradient">$49.99/month</h3>
                        <p class="text-center text-gray-400 mb-4">or $399.99/year (save 33%)</p>
                        <div class="flex flex-col gap-2 mb-4">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>All Pro features</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>Custom event branding</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>Advanced analytics</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>24/7 priority support</span>
                            </div>
                        </div>
                        <button class="btn btn-pro-plus btn-block" onclick="upgradeToProPlus()">
                            <i class="fas fa-star"></i> Upgrade to Pro Plus
                        </button>
                    </div>
                </div>
            </div>
            
            <button class="btn btn-glass btn-block mt-4" onclick="closeProModal()">
                Maybe Later
            </button>
        </div>
    </div>

    <!-- Match Modal -->
    <div class="match-modal" id="matchModal">
        <div class="match-content">
            <div class="match-images">
                <div class="match-avatar" id="userAvatar"></div>
                <div class="flex items-center">
                    <i class="fas fa-bolt" style="font-size: 32px; color: var(--primary);"></i>
                </div>
                <div class="match-avatar" id="matchAvatar"></div>
            </div>
            <h2>It's a Match!</h2>
            <p class="mt-2" id="matchMessage"></p>
            <div class="flex flex-col gap-3 mt-4">
                <button class="btn btn-primary" onclick="startChat()">
                    <i class="fas fa-comment"></i> Send Message
                </button>
                <button class="btn btn-outline" onclick="closeMatchModal()">
                    Keep Swiping
                </button>
            </div>
        </div>
    </div>

    <script>
        // ===== MOCK DATA =====
        const MOCK_PROFILES = [
            {
                id: 1,
                name: 'Katrin',
                age: 23,
                bio: 'Live, Trained As A Dance, Teacher, Gymnast And Acrobat',
                interests: ['Dance', 'Fitness', 'Art', 'Music'],
                eventId: 1,
                location: 'Main Stage',
                online: true,
                verified: true,
                cardColor: 'var(--card-purple)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23C4B5FD"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>'
            },
            {
                id: 2,
                name: 'Alex',
                age: 25,
                bio: 'Product Designer Who Loves Coffee And Indie Music',
                interests: ['Design', 'Music', 'Coffee', 'Art'],
                eventId: 1,
                location: 'Bar Area',
                online: true,
                verified: true,
                cardColor: 'var(--card-pink)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23FFC0D9"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>'
            },
            {
                id: 3,
                name: 'Jordan',
                age: 27,
                bio: 'Startup Founder, Always Down For Deep Conversations',
                interests: ['Tech', 'Philosophy', 'Hiking', 'Sustainability'],
                eventId: 1,
                location: 'Lounge',
                online: false,
                verified: true,
                cardColor: 'var(--card-blue)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23BAE6FD"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>'
            },
            {
                id: 4,
                name: 'Sam',
                age: 26,
                bio: 'Marketing Manager Who Travels Frequently. Foodie Always Looking For The Next Great Restaurant',
                interests: ['Travel', 'Food', 'Photography', 'Wine'],
                eventId: 1,
                location: 'Food Court',
                online: true,
                verified: false,
                cardColor: 'var(--card-green)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23BBF7D0"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>'
            },
            {
                id: 5,
                name: 'Taylor',
                age: 24,
                bio: 'Software Engineer By Day, DJ By Night. Loves Electronic Music',
                interests: ['Music', 'Tech', 'Dancing', 'Festivals'],
                eventId: 1,
                location: 'DJ Booth',
                online: true,
                verified: true,
                cardColor: 'var(--card-teal)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23FECACA"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>'
            },
            {
                id: 6,
                name: 'Alexandra',
                age: 24,
                bio: 'Music producer & DJ. Playing at the main stage tonight. Always looking for creative connections.',
                occupation: 'Music Producer',
                company: 'SoundWave Studios',
                interests: ['Music Production', 'DJing', 'Sound Design', 'Live Performance', 'Electronic Music'],
                eventId: 1,
                location: 'Main Stage',
                online: true,
                verified: true,
                cardColor: 'var(--card-indigo)',
                livePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%23C4B5FD"/><text x="100" y="110" font-size="24" text-anchor="middle" fill="white">Live Photo</text></svg>',
                mutualConnections: 2,
                distance: '15m away'
            }
        ];

        const MOCK_EVENTS = [
            {
                id: 1,
                name: 'Tech Mixer 2024',
                location: 'The Mill, San Francisco',
                date: 'Tonight',
                time: '7:00 PM - 11:00 PM',
                attendees: 156,
                maxAttendees: 200,
                description: 'The biggest tech networking event of the year. Connect with founders, engineers, designers, and investors in the heart of Silicon Valley.',
                category: 'Tech Networking',
                coverImage: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&h=300&fit=crop',
                qrCode: 'AMPS_TECH_2024_001',
                radius: 100,
                organizerId: 1,
                coordinates: { lat: 37.7749, lng: -122.4194 },
                ageRange: '18-45',
                genderPreference: 'Everyone',
                tags: ['Tech', 'Networking', 'Startups', 'AI', 'Blockchain']
            },
            {
                id: 2,
                name: 'Art Gallery Opening',
                location: 'Modern Art Space, SoMa',
                date: 'Tomorrow',
                time: '6:00 PM - 10:00 PM',
                attendees: 89,
                maxAttendees: 150,
                description: 'Contemporary art exhibition featuring emerging local artists. Wine tasting and artist talks included.',
                category: 'Art & Culture',
                coverImage: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=600&h=300&fit=crop',
                qrCode: 'AMPS_ART_2024_002',
                radius: 80,
                organizerId: 2,
                coordinates: { lat: 37.7833, lng: -122.4167 },
                ageRange: '21+',
                genderPreference: 'Everyone',
                tags: ['Art', 'Culture', 'Exhibition', 'Wine Tasting']
            },
            {
                id: 3,
                name: 'Music Producers Meetup',
                location: 'SoundBar Lounge',
                date: 'Friday',
                time: '9:00 PM - 2:00 AM',
                attendees: 45,
                maxAttendees: 80,
                description: 'Exclusive meetup for music producers, DJs, and sound engineers. Equipment showcase and demo sharing.',
                category: 'Music & Audio',
                coverImage: 'https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=600&h=300&fit=crop',
                qrCode: 'AMPS_MUSIC_2024_003',
                radius: 50,
                organizerId: 3,
                coordinates: { lat: 37.7815, lng: -122.4152 },
                ageRange: '21-40',
                genderPreference: 'Everyone',
                tags: ['Music', 'Producers', 'DJs', 'Audio Engineering']
            }
        ];

        const MOCK_CHAT_MESSAGES = {
            '2': [
                {
                    id: 1,
                    sender: 'user',
                    text: 'Hey Marcus! Saw you\'re into AI startups. I\'m working on something similar.',
                    time: '8:30 PM',
                    read: true
                },
                {
                    id: 2,
                    sender: 'match',
                    text: 'Awesome! What are you building? I\'d love to hear more.',
                    time: '8:32 PM',
                    read: true
                }
            ]
        };

        // ===== APP STATE =====
        let state = {
            currentUser: null,
            currentPage: 'home',
            currentEvent: null,
            swipeCount: 0,
            dailyLikes: 30,
            lastSwipeReset: new Date().toDateString(),
            isPro: false,
            isProPlus: false,
            matches: [],
            events: MOCK_EVENTS,
            attendees: MOCK_PROFILES,
            cameraStream: null,
            facingMode: 'user',
            history: ['home'],
            currentProfileIndex: 0,
            swipeHistory: [],
            lastMatch: null,
            notification: null,
            chatMessages: MOCK_CHAT_MESSAGES,
            userLivePhoto: null,
            userProfile: {
                name: 'Demo User',
                email: 'demo@amps.com',
                age: 28,
                occupation: 'Software Engineer',
                company: 'Tech Corp',
                bio: 'Passionate about technology and building meaningful connections at events.',
                interests: ['Technology', 'Music', 'Travel', 'Fitness', 'Photography'],
                profilePhoto: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><rect width="200" height="200" fill="%238B5CF6"/><text x="100" y="120" font-size="24" text-anchor="middle" fill="white">User</text></svg>'
            },
            superLikes: 1,
            rewindCount: 1
        };

        // ===== ROUTER =====
        function navigateTo(page) {
            state.history.push(state.currentPage);
            state.currentPage = page;
            renderPage();
            updateNavigation();
            window.scrollTo(0, 0);
        }

        function goBack() {
            if (state.history.length > 1) {
                const previousPage = state.history.pop();
                state.currentPage = state.history.pop() || 'home';
                renderPage();
                updateNavigation();
            }
        }

        // ===== PAGE RENDERERS =====
        function renderPage() {
            const content = document.getElementById('content');
            
            switch(state.currentPage) {
                case 'home':
                    renderHomePage(content);
                    break;
                case 'auth':
                    renderAuthPage(content);
                    break;
                case 'dashboard':
                    renderDashboardPage(content);
                    break;
                case 'scanner':
                    renderScannerPage(content);
                    break;
                case 'swipe':
                    renderSwipePage(content);
                    break;
                case 'chat':
                    renderChatPage(content);
                    break;
                case 'events':
                    renderEventsPage(content);
                    break;
                case 'matches':
                    renderMatchesPage(content);
                    break;
                case 'profile':
                    renderProfilePage(content);
                    break;
                case 'create-event':
                    renderCreateEventPage(content);
                    break;
                case 'manage-event':
                    renderManageEventPage(content);
                    break;
                case 'event-detail':
                    renderEventDetailPage(content);
                    break;
                case 'pricing':
                    renderPricingPage(content);
                    break;
                case 'edit-profile':
                    renderEditProfilePage(content);
                    break;
                case 'settings':
                    renderSettingsPage(content);
                    break;
                default:
                    renderHomePage(content);
            }
        }

        function updateNavigation() {
            const navbar = document.querySelector('.navbar') || document.createElement('nav');
            navbar.className = 'navbar';
            
            let navHTML = `
                <div class="nav-brand" onclick="navigateTo('home')">
                    <i class="fas fa-bolt"></i>
                    <span class="amp">Amp</span><span class="s">s</span>
                </div>
                <div class="nav-actions">
            `;
            
            if (state.currentPage === 'home') {
                if (state.currentUser) {
                    navHTML += `
                        <button class="btn btn-outline btn-small" onclick="showMenuModal()">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    `;
                } else {
                    navHTML += `
                        <button class="btn btn-outline btn-small" onclick="navigateTo('auth')">
                            <i class="fas fa-sign-in-alt"></i> Sign In
                        </button>
                    `;
                }
            } else {
                navHTML += `
                    <button class="back-btn" onclick="goBack()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                `;
            }
            
            navHTML += `</div>`;
            
            if (!document.querySelector('.navbar')) {
                document.getElementById('app').insertBefore(navbar, document.getElementById('content'));
            }
            navbar.innerHTML = navHTML;
            
            // Update bottom nav
            const bottomNav = document.getElementById('bottomNav');
            if (state.currentUser && ['dashboard', 'events', 'swipe', 'matches', 'profile'].includes(state.currentPage)) {
                const unreadCount = state.matches.filter(m => m.unread).length;
                bottomNav.innerHTML = `
                    <div class="bottom-nav">
                        <button class="nav-item ${state.currentPage === 'dashboard' ? 'active' : ''}" onclick="navigateTo('dashboard')">
                            <i class="fas fa-home"></i>
                            <span>Home</span>
                        </button>
                        <button class="nav-item ${state.currentPage === 'events' ? 'active' : ''}" onclick="navigateTo('events')">
                            <i class="fas fa-calendar"></i>
                            <span>Events</span>
                        </button>
                        <button class="nav-item ${state.currentPage === 'swipe' ? 'active' : ''}" onclick="navigateTo('swipe')">
                            <i class="fas fa-users"></i>
                            <span>Connect</span>
                        </button>
                        <button class="nav-item ${state.currentPage === 'matches' ? 'active' : ''}" onclick="navigateTo('matches')">
                            <i class="fas fa-heart"></i>
                            <span>Matches${unreadCount > 0 ? ` (${unreadCount})` : ''}</span>
                        </button>
                        <button class="nav-item ${state.currentPage === 'profile' ? 'active' : ''}" onclick="navigateTo('profile')">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </button>
                    </div>
                `;
            } else {
                bottomNav.innerHTML = '';
            }
        }

        // ===== PAGE COMPONENTS =====
        function renderHomePage(container) {
            container.innerHTML = `
                <div class="hero-bg"></div>
                
                <div class="hero">
                    <h1>Amplify Your Connections at Live Events</h1>
                    <p class="hero-subtitle">Scan the QR code at any event to see who's there and connect instantly with verified attendees.</p>
                    
                    <div class="cta-grid">
                        ${state.currentUser ? 
                            `<button class="btn btn-primary btn-large" onclick="navigateTo('scanner')">
                                <i class="fas fa-qrcode"></i> Scan Event QR Code
                            </button>
                            ${!state.isPro && !state.isProPlus ? `
                                <button class="btn btn-pro btn-large" onclick="navigateTo('pricing')">
                                    <i class="fas fa-crown"></i> Upgrade to Pro
                                </button>
                            ` : ''}` :
                            `<button class="btn btn-primary btn-large" onclick="navigateTo('auth')">
                                <i class="fas fa-user-plus"></i> Get Started Free
                            </button>
                            <button class="btn btn-glass btn-large" onclick="demoLogin()">
                                <i class="fas fa-play-circle"></i> Try Demo
                            </button>`
                        }
                    </div>
                </div>
                
                <div class="features-grid">
                    ${[
                        { icon: 'fa-qrcode', title: 'Live Event Check-in', desc: 'Scan event QR and take fresh selfie' },
                        { icon: 'fa-camera', title: 'Verified Attendees', desc: 'Everyone verified with live photos' },
                        { icon: 'fa-heart', title: 'Smart Matching', desc: 'Connect with people at same event' },
                        { icon: 'fa-comments', title: 'Real-time Chat', desc: 'Message matches instantly' }
                    ].map(feature => `
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas ${feature.icon}"></i>
                            </div>
                            <h3>${feature.title}</h3>
                            <p>${feature.desc}</p>
                        </div>
                    `).join('')}
                </div>
                
                <div class="events-section">
                    <h2 class="text-center mb-4">Featured Events</h2>
                    <p class="text-center text-gray-400 mb-12">Join trending events near you</p>
                    
                    <div class="events-grid">
                        ${state.events.slice(0, 2).map(event => `
                            <div class="event-card notched-tl" onclick="viewEvent(${event.id})" style="cursor: pointer;">
                                <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2)); padding: 16px; border-radius: 16px; margin-bottom: 16px;">
                                    <h3 class="mb-3">${event.name}</h3>
                                    <p class="text-gray-300">${event.description.substring(0, 100)}...</p>
                                </div>
                                <div class="event-info">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>${event.location}</span>
                                </div>
                                <div class="event-info">
                                    <i class="fas fa-calendar"></i>
                                    <span>${event.date}  ${event.time}</span>
                                </div>
                                <div class="event-info">
                                    <i class="fas fa-users"></i>
                                    <span>${event.attendees} attending</span>
                                </div>
                                <button class="btn btn-primary btn-block mt-4">
                                    <i class="fas fa-eye"></i> View Details
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                ${!state.currentUser ? `
                    <div class="card mt-8 text-center">
                        <h3 class="mb-4">Ready to Amplify Your Connections?</h3>
                        <p class="text-gray-400 mb-6">Join thousands who are making meaningful connections at events</p>
                        <button class="btn btn-primary btn-large" onclick="navigateTo('auth')">
                            <i class="fas fa-rocket"></i> Start Free
                        </button>
                    </div>
                ` : ''}
            `;
        }

        function renderAuthPage(container) {
            container.innerHTML = `
                <div class="auth-container">
                    <h2 class="text-center mb-5">Welcome to Amps</h2>
                    
                    <div class="card">
                        <div class="auth-tabs">
                            <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
                            <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
                        </div>
                        
                        <form id="authForm" onsubmit="handleAuth(event)">
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" placeholder="you@example.com" value="demo@amps.com" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Password</label>
                                <input type="password" class="form-control" placeholder="" value="password" required minlength="6">
                            </div>
                            
                            <div id="signupFields" class="hidden">
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" placeholder="Alex Johnson">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Age</label>
                                    <input type="number" class="form-control" placeholder="24" min="18" max="100">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" placeholder="+264 81 123 4567">
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block mt-4">
                                <i class="fas fa-sign-in-alt"></i> Continue
                            </button>
                        </form>
                        
                        <div class="text-center mt-4">
                            <button class="btn btn-outline btn-block" onclick="demoLogin()">
                                <i class="fas fa-rocket"></i> Continue as Demo User
                            </button>
                        </div>
                        
                        <div class="text-xs text-gray-400 text-center mt-4 p-3 bg-gray-900/50 rounded-lg">
                            Demo credentials pre-filled. Just click "Continue"!
                        </div>
                    </div>
                </div>
            `;
        }

        function renderDashboardPage(container) {
            const eventsAttended = 12;
            const totalMatches = state.matches.length;
            const responseRate = '89%';
            
            container.innerHTML = `
                <div class="profile-header">
                    <div class="avatar ${state.isPro ? 'pro' : state.isProPlus ? 'pro-plus' : ''}" style="background-image: url('${state.userProfile.profilePhoto}');">
                        ${state.isPro ? '<div class="pro-badge" style="position: absolute; bottom: -8px; right: -8px; font-size: 10px;"><i class="fas fa-crown"></i></div>' : ''}
                        ${state.isProPlus ? '<div class="pro-plus-badge" style="position: absolute; bottom: -8px; right: -8px; font-size: 10px;"><i class="fas fa-star"></i></div>' : ''}
                    </div>
                    <h2>${state.userProfile.name}</h2>
                    <p class="text-gradient">${state.userProfile.occupation} at ${state.userProfile.company}</p>
                    ${state.isPro ? 
                        '<div class="pro-badge mt-2"><i class="fas fa-crown"></i> PRO MEMBER</div>' : 
                        state.isProPlus ?
                        '<div class="pro-plus-badge mt-2"><i class="fas fa-star"></i> PRO PLUS</div>' :
                        '<div class="free-badge mt-2"><i class="fas fa-user"></i> FREE MEMBER</div>'
                    }
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${eventsAttended}</div>
                        <div class="stat-label">Events Attended</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${totalMatches}</div>
                        <div class="stat-label">Total Matches</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${responseRate}</div>
                        <div class="stat-label">Response Rate</div>
                    </div>
                </div>
                
                <h3 class="mt-6 mb-4">Quick Actions</h3>
                <div class="quick-actions">
                    <div class="action-card primary" onclick="${state.isPro || state.isProPlus ? "navigateTo('create-event')" : "navigateTo('pricing')"}">
                        <i class="fas fa-plus-circle"></i>
                        <h4>Create Event</h4>
                        <p class="text-gray-400">${state.isPro || state.isProPlus ? 'Set up a new event' : 'Upgrade to create events'}</p>
                        ${!state.isPro && !state.isProPlus ? '<div class="pro-badge mt-2">PRO</div>' : ''}
                    </div>
                    
                    <div class="action-card blue" onclick="navigateTo('scanner')">
                        <i class="fas fa-qrcode"></i>
                        <h4>Scan QR</h4>
                        <p class="text-gray-400">Join an event</p>
                    </div>
                    
                    <div class="action-card pink" onclick="navigateTo('matches')">
                        <i class="fas fa-heart"></i>
                        <h4>My Matches</h4>
                        <p class="text-gray-400">${state.matches.length} matches</p>
                    </div>
                    
                    <div class="action-card gold" onclick="${state.isPro || state.isProPlus ? "showProfileViews()" : "navigateTo('pricing')"}">
                        <i class="fas fa-eye"></i>
                        <h4>Profile Views</h4>
                        <p class="text-gray-400">${state.isPro || state.isProPlus ? 'See who viewed you' : 'Pro feature'}</p>
                        ${!state.isPro && !state.isProPlus ? '<div class="pro-badge mt-2">PRO</div>' : ''}
                    </div>
                </div>
                
                <h3 class="mt-8 mb-4">Active Events Near You</h3>
                <div id="activeEvents">
                    ${state.events.slice(0, 2).map(event => `
                        <div class="event-card notched-tl mb-4" onclick="viewEvent(${event.id})" style="cursor: pointer;">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4>${event.name}</h4>
                                    <p class="text-gray-400">
                                        <i class="fas fa-map-marker-alt"></i> ${event.location}
                                    </p>
                                </div>
                                <div class="text-right">
                                    <div class="text-gradient font-bold">${event.attendees} people</div>
                                    <p class="text-sm">${event.date}</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <div class="w-full bg-gray-800 rounded-full h-2">
                                    <div class="bg-primary h-2 rounded-full" style="width: ${(event.attendees / event.maxAttendees * 100)}%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 mt-2">
                                    <span>${event.attendees} joined</span>
                                    <span>${event.maxAttendees} capacity</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="card mt-6">
                    <h4 class="mb-4">Daily Limits</h4>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm">Likes remaining</span>
                                <span class="text-sm font-semibold">${state.isPro || state.isProPlus ? '' : state.dailyLikes - state.swipeCount}</span>
                            </div>
                            <div class="w-full bg-gray-800 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: ${state.isPro || state.isProPlus ? '100' : ((state.dailyLikes - state.swipeCount) / state.dailyLikes * 100)}%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm">Super Likes</span>
                                <span class="text-sm font-semibold">${state.isPro ? '5' : state.isProPlus ? '5' : state.superLikes} left</span>
                            </div>
                            <div class="w-full bg-gray-800 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: ${state.isPro || state.isProPlus ? '100' : (state.superLikes * 100)}%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-sm">Rewinds</span>
                                <span class="text-sm font-semibold">${state.isPro || state.isProPlus ? '' : state.rewindCount} left</span>
                            </div>
                            <div class="w-full bg-gray-800 rounded-full h-2">
                                <div class="bg-yellow-500 h-2 rounded-full" style="width: ${state.isPro || state.isProPlus ? '100' : (state.rewindCount * 100)}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderSwipePage(container) {
            if (!state.currentEvent) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-calendar-times" style="font-size: 64px; color: var(--gray-600); margin-bottom: 16px;"></i>
                        <h3 class="mb-2">No Active Event</h3>
                        <p class="text-gray-400 mb-6">Join an event first to start connecting with people</p>
                        <button class="btn btn-primary" onclick="navigateTo('events')">
                            <i class="fas fa-calendar"></i> Browse Events
                        </button>
                    </div>
                `;
                return;
            }
            
            const availableProfiles = MOCK_PROFILES.filter(p => 
                !state.swipeHistory.some(s => s.profile.id === p.id)
            );
            
            if (availableProfiles.length === 0) {
                container.innerHTML = `
                    <div class="swipe-interface">
                        <div class="swipe-header">
                            <div class="event-badge">
                                ${state.currentEvent.name}  No more profiles
                            </div>
                        </div>
                        
                        <div class="card-stack">
                            <div class="text-center text-white">
                                <i class="fas fa-users" style="font-size: 64px; color: var(--gray-600); margin-bottom: 16px;"></i>
                                <h3 class="text-2xl font-bold mb-2">No more profiles</h3>
                                <p class="text-gray-400 mb-6">Check back soon for new arrivals!</p>
                                <button class="btn btn-primary" onclick="resetSwipes()">
                                    <i class="fas fa-redo"></i> Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                return;
            }
            
            const currentProfile = availableProfiles[0];
            const nextProfile = availableProfiles[1] || null;
            const thirdProfile = availableProfiles[2] || null;
            
            const likesRemaining = state.isPro || state.isProPlus ? '' : state.dailyLikes - state.swipeCount;
            
            container.innerHTML = `
                <div class="swipe-interface">
                    <div class="for-you-bg">FOR YOU</div>
                    
                    <div class="swipe-header">
                        <div class="flex justify-between items-center mb-4">
                            <div class="event-badge notched-tl">
                                <i class="fas fa-calendar"></i>
                                <span>${state.currentEvent.name}</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn btn-glass btn-small" onclick="showFilters()">
                                    <i class="fas fa-filter"></i>
                                </button>
                                <button class="btn btn-glass btn-small" onclick="viewFullProfile(${currentProfile.id})">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-center text-gray-400 text-sm mb-4">
                            <i class="fas fa-user-friends"></i>
                            <span>${availableProfiles.length} profiles available  ${likesRemaining} likes remaining</span>
                        </div>
                    </div>
                    
                    <div class="card-stack">
                        <div class="card-container">
                            ${thirdProfile ? `
                                <div class="profile-card" style="z-index: 1; scale: 0.90; translate: -8px -24px; rotate: -2deg; opacity: 0.4;">
                                    <div class="card-content" style="background: ${thirdProfile.cardColor};">
                                        <div class="profile-image" style="background-image: url('${thirdProfile.livePhoto}');"></div>
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${nextProfile ? `
                                <div class="profile-card" style="z-index: 2; scale: 0.95; translate: 8px -12px; rotate: 2deg; opacity: 0.7;">
                                    <div class="card-content" style="background: ${nextProfile.cardColor};">
                                        <div class="profile-image" style="background-image: url('${nextProfile.livePhoto}');"></div>
                                    </div>
                                </div>
                            ` : ''}
                            
                            <div class="profile-card" id="profileCard${currentProfile.id}" style="z-index: 3;">
                                <div class="card-frame"></div>
                                <div class="card-content" style="background: ${currentProfile.cardColor};">
                                    <div class="profile-image" style="background-image: url('${currentProfile.livePhoto}');">
                                        <div class="live-badge" style="position: absolute; top: 16px; right: 16px;">
                                            <i class="fas fa-camera"></i>
                                            <span>LIVE</span>
                                        </div>
                                    </div>
                                    <div class="profile-info">
                                        <h2>${currentProfile.name}, ${currentProfile.age}</h2>
                                        <p class="text-gray-600 mb-4">
                                            <i class="fas fa-map-marker-alt"></i> ${currentProfile.location}
                                        </p>
                                        
                                        <p class="mb-4">${currentProfile.bio}</p>
                                        
                                        <div class="interests mb-6">
                                            ${currentProfile.interests.slice(0, 4).map(interest => `
                                                <span class="interest-tag">${interest}</span>
                                            `).join('')}
                                        </div>
                                        
                                        <div class="text-center text-gray-600 text-sm">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Verified attendee at ${state.currentEvent.name}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="swipe-overlay like">LIKE</div>
                                <div class="swipe-overlay nope">NOPE</div>
                                <div class="swipe-overlay super">SUPER</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swipe-actions">
                        <button class="action-button" onclick="swipeLeft()" ${(!state.isPro && !state.isProPlus && state.swipeCount >= state.dailyLikes) ? 'disabled' : ''}>
                            <i class="fas fa-times"></i>
                        </button>
                        
                        <button class="action-button undo" onclick="undoSwipe()" ${state.swipeHistory.length === 0 || (!state.isPro && !state.isProPlus && state.rewindCount <= 0) ? 'disabled' : ''}>
                            <i class="fas fa-redo"></i>
                        </button>
                        
                        <button class="action-button like" onclick="swipeRight()" ${(!state.isPro && !state.isProPlus && state.swipeCount >= state.dailyLikes) ? 'disabled' : ''}>
                            <i class="fas fa-heart"></i>
                        </button>
                        
                        <button class="action-button" onclick="superLike()" ${(!state.isPro && !state.isProPlus && state.superLikes <= 0) ? 'disabled' : ''}>
                            <i class="fas fa-star"></i>
                        </button>
                    </div>
                    
                    <div class="text-center text-gray-400 px-4 pb-4">
                        <div class="flex justify-center gap-6 mb-2">
                            <div class="text-sm">
                                <i class="fas fa-heart"></i>
                                <span>Like</span>
                            </div>
                            <div class="text-sm">
                                <i class="fas fa-times"></i>
                                <span>Pass</span>
                            </div>
                            <div class="text-sm">
                                <i class="fas fa-star"></i>
                                <span>Super Like</span>
                            </div>
                        </div>
                        ${(!state.isPro && !state.isProPlus) && (state.swipeCount >= state.dailyLikes - 5 || state.superLikes <= 0) ? `
                            <button class="btn btn-pro btn-small mt-2" onclick="navigateTo('pricing')">
                                <i class="fas fa-crown"></i> Upgrade for unlimited
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Initialize drag
            initializeSwipeGestures();
        }

        function renderEventsPage(container) {
            container.innerHTML = `
                <h2 class="mb-4">Events</h2>
                
                ${state.currentUser && (state.isPro || state.isProPlus) ? `
                    <div class="card mb-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <h3>Create New Event</h3>
                                <p class="text-gray-400">Set up a new event with QR code</p>
                            </div>
                            <button class="btn btn-primary" onclick="navigateTo('create-event')">
                                <i class="fas fa-plus"></i> Create
                            </button>
                        </div>
                    </div>
                ` : ''}
                
                <h3 class="mb-3">Active Events</h3>
                <div class="events-grid">
                    ${state.events.map(event => `
                        <div class="event-card notched-tl" onclick="viewEvent(${event.id})" style="cursor: pointer;">
                            <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2)); padding: 16px; border-radius: 16px; margin-bottom: 16px;">
                                <h3 class="mb-3">${event.name}</h3>
                                <p class="text-gray-300">${event.description.substring(0, 120)}...</p>
                            </div>
                            <div class="event-info">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${event.location}</span>
                            </div>
                            <div class="event-info">
                                <i class="fas fa-calendar"></i>
                                <span>${event.date}  ${event.time}</span>
                            </div>
                            <div class="event-info">
                                <i class="fas fa-users"></i>
                                <span>${event.attendees} / ${event.maxAttendees} attending</span>
                            </div>
                            <div class="mt-4">
                                <div class="flex gap-2">
                                    ${event.tags.slice(0, 3).map(tag => `
                                        <span class="text-xs px-3 py-1 bg-gray-800 rounded-full">${tag}</span>
                                    `).join('')}
                                </div>
                            </div>
                            <button class="btn btn-primary btn-block mt-4">
                                <i class="fas fa-eye"></i> View Details
                            </button>
                        </div>
                    `).join('')}
                </div>
                
                <h3 class="mt-8 mb-3">Your Events</h3>
                ${state.currentUser && state.events.filter(e => e.organizerId === state.currentUser.id).length > 0 ? 
                    state.events.filter(e => e.organizerId === state.currentUser.id).map(event => `
                        <div class="card mb-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4>${event.name}</h4>
                                    <p class="text-gray-400">
                                        <i class="fas fa-map-marker-alt"></i> ${event.location}
                                    </p>
                                </div>
                                <div class="flex gap-2">
                                    <button class="btn btn-outline btn-small" onclick="navigateTo('manage-event')">
                                        <i class="fas fa-chart-line"></i> Manage
                                    </button>
                                    <button class="btn btn-glass btn-small">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('') :
                    '<p class="text-gray-400 text-center py-4">You haven\'t created any events yet.</p>'
                }
            `;
        }

        function renderMatchesPage(container) {
            container.innerHTML = `
                <h2 class="mb-4">Your Matches</h2>
                
                ${state.matches.length > 0 ? `
                    <div class="attendee-list">
                        ${state.matches.map(match => `
                            <div class="attendee-item" onclick="openChat('${match.user?.id || match.id}')" style="cursor: pointer;">
                                <div class="attendee-avatar" style="background-image: url('${match.user?.livePhoto || match.livePhoto}');"></div>
                                <div class="attendee-info">
                                    <div class="flex items-center gap-2">
                                        <h4>${match.user?.name || match.name}, ${match.user?.age || match.age}</h4>
                                        ${match.unread ? '<span class="w-2 h-2 bg-primary rounded-full"></span>' : ''}
                                    </div>
                                    <p class="text-gray-400 text-sm">${match.lastMessage || 'New match!'}</p>
                                    <div class="text-xs text-gray-500 mt-1">${match.lastMessageTime || 'Just now'}  ${state.currentEvent?.name || 'Event'}</div>
                                </div>
                                <div class="attendee-status ${(match.user?.online || match.online) ? 'status-online' : 'status-away'}">
                                    <i class="fas fa-circle" style="font-size: 8px;"></i>
                                    <span>${(match.user?.online || match.online) ? 'Online' : 'Away'}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                ` : `
                    <div class="text-center py-12">
                        <i class="fas fa-heart" style="font-size: 64px; color: var(--gray-600); margin-bottom: 16px;"></i>
                        <h3 class="mb-2">No Matches Yet</h3>
                        <p class="text-gray-400 mb-6">Start swiping at events to make connections!</p>
                        <button class="btn btn-primary" onclick="navigateTo('events')">
                            <i class="fas fa-calendar"></i> Find Events
                        </button>
                    </div>
                `}
                
                <div class="card mt-6">
                    <h4 class="mb-4">Match Statistics</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold mb-1">${state.matches.length}</div>
                            <div class="text-sm text-gray-400">Total Matches</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold mb-1">${state.matches.filter(m => m.unread).length}</div>
                            <div class="text-sm text-gray-400">Unread</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderProfilePage(container) {
            const remainingSwipes = state.isPro || state.isProPlus ? '' : Math.max(0, state.dailyLikes - state.swipeCount);
            
            container.innerHTML = `
                <div class="profile-header">
                    <div class="avatar ${state.isPro ? 'pro' : state.isProPlus ? 'pro-plus' : ''}" style="background-image: url('${state.userProfile.profilePhoto}');">
                        <button class="absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full" onclick="changeProfilePhoto()">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <h2>${state.userProfile.name}, ${state.userProfile.age}</h2>
                    <p class="text-gradient">${state.userProfile.occupation}  ${state.userProfile.company}</p>
                    
                    <div class="flex gap-3 mt-4">
                        ${state.isPro ? 
                            '<div class="pro-badge"><i class="fas fa-crown"></i> PRO MEMBER</div>' : 
                            state.isProPlus ?
                            '<div class="pro-plus-badge"><i class="fas fa-star"></i> PRO PLUS</div>' :
                            '<div class="free-badge"><i class="fas fa-user"></i> FREE MEMBER</div>'
                        }
                        <div class="pro-badge" style="background: var(--bg-tertiary); color: var(--gray-300);">
                            <i class="fas fa-heart"></i>
                            <span>${remainingSwipes} likes today</span>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <h3 class="mb-4">About</h3>
                    <p class="text-gray-300 mb-4">${state.userProfile.bio}</p>
                    <div class="flex flex-wrap gap-2">
                        ${state.userProfile.interests.map(interest => `
                            <span class="px-3 py-1 bg-gray-800 rounded-full text-sm">${interest}</span>
                        `).join('')}
                    </div>
                    <button class="btn btn-outline btn-block mt-4" onclick="navigateTo('edit-profile')">
                        <i class="fas fa-edit"></i> Edit Profile
                    </button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Events</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${state.matches.length}</div>
                        <div class="stat-label">Matches</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">89%</div>
                        <div class="stat-label">Response</div>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <h3 class="mb-4">Account</h3>
                    <div class="flex flex-col gap-3">
                        <button class="btn btn-outline" onclick="navigateTo('settings')">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                        ${!state.isPro && !state.isProPlus ? `
                            <button class="btn btn-pro" onclick="navigateTo('pricing')">
                                <i class="fas fa-crown"></i> Upgrade to Pro
                            </button>
                        ` : ''}
                        <button class="btn btn-outline" onclick="showPrivacySettings()">
                            <i class="fas fa-shield-alt"></i> Privacy & Safety
                        </button>
                        <button class="btn btn-outline" onclick="showHelp()">
                            <i class="fas fa-question-circle"></i> Help & Support
                        </button>
                    </div>
                </div>
                
                <div class="card mt-4">
                    <button class="btn btn-outline btn-block text-red-400" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Sign Out
                    </button>
                </div>
            `;
        }

        function renderScannerPage(container) {
            container.innerHTML = `
                <div class="scanner-container">
                    <h2 class="text-center">Scan Event QR Code</h2>
                    <p class="text-center mt-2">Point your camera at the event QR code to join</p>
                    
                    <div class="qr-scanner" id="qrScanner">
                        <div class="scanner-overlay"></div>
                        <div class="scanner-line"></div>
                    </div>
                    
                    <button class="btn btn-primary btn-block mt-4" onclick="startCameraScanning()">
                        <i class="fas fa-camera"></i> Start Scanner
                    </button>
                    
                    <button class="btn btn-outline btn-block mt-2" onclick="enterCodeManually()">
                        <i class="fas fa-keyboard"></i> Enter Code Manually
                    </button>
                    
                    <div class="card-glass mt-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-info-circle text-gradient"></i>
                            <p>Camera and location access required. You must be at the event location to join.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderCreateEventPage(container) {
            if (!state.isPro && !state.isProPlus) {
                container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-crown" style="font-size: 64px; color: var(--gray-600); margin-bottom: 16px;"></i>
                        <h3 class="mb-2">Pro Feature Required</h3>
                        <p class="text-gray-400 mb-6">Upgrade to Pro to create events</p>
                        <button class="btn btn-pro" onclick="navigateTo('pricing')">
                            <i class="fas fa-crown"></i> Upgrade to Pro
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div class="create-form">
                    <h2 class="text-center mb-4">Create New Event</h2>
                    
                    <div class="card">
                        <form id="createEventForm" onsubmit="createEvent(event)">
                            <div class="form-group">
                                <label class="form-label">Event Name</label>
                                <input type="text" class="form-control" placeholder="Tech Meetup Afterparty" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea class="form-control" rows="3" placeholder="Describe your event..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location Name</label>
                                <input type="text" class="form-control" placeholder="Downtown Bar & Grill" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Event Duration (hours)</label>
                                <input type="number" class="form-control" min="1" max="24" value="4" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Max Attendees</label>
                                <input type="number" class="form-control" min="10" max="1000" value="50" required>
                            </div>
                            
                            <div class="card-glass mb-4">
                                <div class="flex items-center gap-3">
                                    <i class="fas fa-info-circle text-gradient"></i>
                                    <p>QR code will be generated after event creation. Print and display it at your event.</p>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-block">
                                <i class="fas fa-plus"></i> Create Event
                            </button>
                        </form>
                    </div>
                    
                    <div class="card mt-4" id="qrDisplay" style="display: none;">
                        <h3 class="text-center mb-3">Your Event QR Code</h3>
                        <div class="qr-code-display" id="qrCodeDisplay">
                            Loading QR...
                        </div>
                        <p class="text-center mt-3">Print and display this QR code at your event venue</p>
                        <button class="btn btn-outline btn-block mt-3" onclick="printQR()">
                            <i class="fas fa-print"></i> Print QR Code
                        </button>
                    </div>
                </div>
            `;
        }

        function renderPricingPage(container) {
            container.innerHTML = `
                <h2 class="text-center mb-2">Upgrade Your Experience</h2>
                <p class="text-center text-gray-400 mb-6">Choose the plan that's right for you</p>
                
                <div class="pricing-grid">
                    <div class="pricing-card">
                        <div class="free-badge mb-4">FREE</div>
                        <h3 class="text-center mb-2">$0/month</h3>
                        <p class="text-center text-gray-400 mb-4">Basic features to get started</p>
                        <div class="flex flex-col gap-3 mb-6">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Join unlimited events</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>30 likes/day per event</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>1 super like/week</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-times text-gray-500"></i>
                                <span class="text-gray-400">See who liked you</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-times text-gray-500"></i>
                                <span class="text-gray-400">Video calls</span>
                            </div>
                        </div>
                        <button class="btn btn-outline btn-block" onclick="showNotification('You\'re already on Free plan', 'info')">
                            Current Plan
                        </button>
                    </div>
                    
                    <div class="pricing-card featured">
                        <div class="pro-badge mb-4">PRO</div>
                        <h3 class="text-center mb-2 pro-gradient">$14.99/month</h3>
                        <p class="text-center text-gray-400 mb-4">or $99.99/year (save 44%)</p>
                        <div class="flex flex-col gap-3 mb-6">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Everything in Free</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Unlimited likes</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>5 super likes/day</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>See who liked you</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-green-500"></i>
                                <span>Video calls & read receipts</span>
                            </div>
                        </div>
                        <button class="btn btn-pro btn-block" onclick="upgradeToPro()">
                            <i class="fas fa-crown"></i> Upgrade to Pro
                        </button>
                    </div>
                    
                    <div class="pricing-card">
                        <div class="pro-plus-badge mb-4">PRO PLUS</div>
                        <h3 class="text-center mb-2 pro-plus-gradient">$49.99/month</h3>
                        <p class="text-center text-gray-400 mb-4">or $399.99/year (save 33%)</p>
                        <div class="flex flex-col gap-3 mb-6">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>Everything in Pro</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>Custom event branding</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>Advanced analytics</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>24/7 priority support</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-check text-yellow-500"></i>
                                <span>API access</span>
                            </div>
                        </div>
                        <button class="btn btn-pro-plus btn-block" onclick="upgradeToProPlus()">
                            <i class="fas fa-star"></i> Upgrade to Pro Plus
                        </button>
                    </div>
                </div>
                
                <div class="card mt-6">
                    <h4 class="mb-4">Payment Methods</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="btn btn-outline" onclick="showPayment('paypal')">
                            <i class="fab fa-paypal"></i> PayPal
                        </button>
                        <button class="btn btn-outline" onclick="showPayment('card')">
                            <i class="fas fa-credit-card"></i> Card
                        </button>
                        <button class="btn btn-outline" onclick="showPayment('mobile')">
                            <i class="fas fa-mobile-alt"></i> Mobile Money
                        </button>
                        <button class="btn btn-outline" onclick="showPayment('bank')">
                            <i class="fas fa-university"></i> Bank Transfer
                        </button>
                    </div>
                    <p class="text-center text-xs text-gray-400 mt-4">
                        <i class="fas fa-lock"></i> All payments are secure and encrypted
                    </p>
                </div>
            `;
        }

        function renderChatPage(container) {
            const matchId = state.currentPage.split('-')[1];
            const match = state.matches.find(m => (m.user?.id || m.id) === parseInt(matchId)) || MOCK_PROFILES.find(p => p.id === parseInt(matchId));
            
            if (!match) {
                navigateTo('matches');
                return;
            }
            
            const messages = state.chatMessages[matchId] || [];
            
            container.innerHTML = `
                <div class="chat-container">
                    <div class="chat-header">
                        <button class="back-btn" onclick="navigateTo('matches')">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="chat-avatar" style="background-image: url('${match.livePhoto || match.user?.livePhoto}');"></div>
                        <div>
                            <h3>${match.name || match.user?.name}</h3>
                            <p class="text-sm text-gradient">Active now at ${state.currentEvent?.name || 'Event'}</p>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        ${messages.length > 0 ? messages.map(msg => `
                            <div class="message ${msg.sender === 'user' ? 'sent' : 'received'}">
                                ${msg.text}
                                <div class="message-time">${msg.time}</div>
                            </div>
                        `).join('') : `
                            <div class="message received">
                                Hey there! Saw you at the event 
                                <div class="message-time">2:30 PM</div>
                            </div>
                            <div class="message sent">
                                Hi! Yeah, it's been great so far!
                                <div class="message-time">2:31 PM</div>
                            </div>
                        `}
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Type a message..." onkeypress="handleMessageKeypress(event)" class="form-control">
                        <button class="btn btn-primary btn-icon" onclick="sendMessage('${matchId}')">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        // ===== EVENT HANDLERS =====
        function switchAuthTab(tab) {
            const tabs = document.querySelectorAll('.auth-tab');
            const signupFields = document.getElementById('signupFields');
            const formButton = document.querySelector('#authForm button[type="submit"]');
            
            tabs.forEach(t => t.classList.remove('active'));
            tabs[tab === 'login' ? 0 : 1].classList.add('active');
            
            if (tab === 'signup') {
                signupFields.classList.remove('hidden');
                formButton.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
            } else {
                signupFields.classList.add('hidden');
                formButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
            }
        }

        function handleAuth(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.querySelector('input[type="email"]').value;
            const password = form.querySelector('input[type="password"]').value;
            
            const isSignup = form.querySelector('#signupFields').classList.contains('hidden') === false;
            
            state.currentUser = {
                id: 'user_' + Date.now(),
                name: isSignup ? (form.querySelector('input[type="text"]')?.value || email.split('@')[0]) : email.split('@')[0],
                email: email,
                isPro: false,
                isProPlus: false
            };
            
            if (isSignup) {
                const age = form.querySelector('input[type="number"]')?.value;
                const phone = form.querySelector('input[type="tel"]')?.value;
                
                if (age) state.userProfile.age = parseInt(age);
                if (phone) state.userProfile.phone = phone;
                if (form.querySelector('input[type="text"]')?.value) {
                    state.userProfile.name = form.querySelector('input[type="text"]').value;
                }
            }
            
            localStorage.setItem('amps_user', JSON.stringify(state.currentUser));
            localStorage.setItem('amps_isPro', state.isPro);
            localStorage.setItem('amps_isProPlus', state.isProPlus);
            localStorage.setItem('amps_userProfile', JSON.stringify(state.userProfile));
            
            showNotification('Welcome to Amps! ', 'success');
            setTimeout(() => navigateTo('dashboard'), 1000);
        }

        function demoLogin() {
            state.currentUser = {
                id: 'demo_user',
                name: 'Demo User',
                email: 'demo@amps.com',
                isPro: false,
                isProPlus: false
            };
            
            state.isPro = false;
            state.isProPlus = false;
            
            localStorage.setItem('amps_user', JSON.stringify(state.currentUser));
            localStorage.setItem('amps_isPro', state.isPro);
            localStorage.setItem('amps_isProPlus', state.isProPlus);
            localStorage.setItem('amps_userProfile', JSON.stringify(state.userProfile));
            
            showNotification('Welcome to Amps Demo! ', 'success');
            navigateTo('dashboard');
        }

        function joinEvent(eventId) {
            if (!state.currentUser) {
                navigateTo('auth');
                return;
            }
            
            const event = eventId ? state.events.find(e => e.id === eventId) : state.currentEvent;
            if (event) {
                state.currentEvent = event;
                showNotification(`Joining ${event.name}... `, 'success');
                
                state.currentProfileIndex = 0;
                state.swipeHistory = [];
                
                setTimeout(() => {
                    navigateTo('scanner');
                }, 1000);
            }
        }

        function viewEvent(eventId) {
            const event = state.events.find(e => e.id === eventId);
            if (event) {
                state.currentEvent = event;
                navigateTo('event-detail');
            }
        }

        async function startCameraScanning() {
            showNotification('Starting camera... Please allow camera access', 'info');
            
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode: 'environment' }
                });
                
                state.cameraStream = stream;
                const scannerView = document.getElementById('qrScanner');
                scannerView.innerHTML = `
                    <video style="width: 100%; height: 100%; object-fit: cover;" autoplay playsinline></video>
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; border: 2px solid var(--primary); border-radius: var(--radius);"></div>
                `;
                
                const video = scannerView.querySelector('video');
                video.srcObject = stream;
                
                setTimeout(() => {
                    showNotification('QR Code scanned successfully!', 'success');
                    stopCamera();
                    
                    setTimeout(() => openCameraForSelfie(), 1000);
                }, 2000);
                
            } catch (error) {
                showNotification('Camera access denied. Please enable camera permissions.', 'error');
                setTimeout(() => {
                    showNotification('Simulating QR scan for demo...', 'info');
                    setTimeout(() => openCameraForSelfie(), 1000);
                }, 2000);
            }
        }

        function stopCamera() {
            if (state.cameraStream) {
                state.cameraStream.getTracks().forEach(track => track.stop());
                state.cameraStream = null;
            }
        }

        async function openCameraForSelfie() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        facingMode: state.facingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    }
                });
                
                state.cameraStream = stream;
                const cameraModal = document.getElementById('cameraModal');
                const video = document.getElementById('cameraVideo');
                
                video.srcObject = stream;
                cameraModal.style.display = 'flex';
                
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        position => {
                            console.log('Location captured:', position.coords);
                        },
                        error => {
                            showNotification('Location access required for verification', 'warning');
                        }
                    );
                }
                
            } catch (error) {
                showNotification('Camera access denied. Please enable camera permissions.', 'error');
            }
        }

        function closeCamera() {
            stopCamera();
            document.getElementById('cameraModal').style.display = 'none';
        }

        function switchCamera() {
            state.facingMode = state.facingMode === 'user' ? 'environment' : 'user';
            closeCamera();
            setTimeout(() => openCameraForSelfie(), 100);
        }

        function takePhoto() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            const photoData = canvas.toDataURL('image/jpeg', 0.8);
            state.userLivePhoto = photoData;
            
            verifyLocationAndProceed(photoData);
        }

        function verifyLocationAndProceed(photoData) {
            showNotification('Verifying your location...', 'info');
            
            setTimeout(() => {
                closeCamera();
                showNotification('Verified! Welcome to the event.', 'success');
                
                setTimeout(() => navigateTo('swipe'), 1000);
            }, 1500);
        }

        // ===== DRAG & SWIPE FUNCTIONALITY =====
        function initializeSwipeGestures() {
            const availableProfiles = MOCK_PROFILES.filter(p => 
                !state.swipeHistory.some(s => s.profile.id === p.id)
            );
            
            if (availableProfiles.length === 0) return;
            
            const currentProfile = availableProfiles[0];
            const card = document.getElementById(`profileCard${currentProfile.id}`);
            if (!card) return;
            
            let startX, startY, moveX, moveY;
            
            card.addEventListener('touchstart', e => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            }, { passive: true });
            
            card.addEventListener('touchmove', e => {
                if (!startX || !startY) return;
                
                moveX = e.touches[0].clientX;
                moveY = e.touches[0].clientY;
                
                const diffX = moveX - startX;
                const diffY = moveY - startY;
                
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    e.preventDefault();
                    card.style.transform = `translateX(${diffX}px) rotate(${diffX * 0.1}deg)`;
                    card.style.opacity = 1 - Math.abs(diffX) / 300;
                    
                    // Show swipe overlays
                    const likeOverlay = card.querySelector('.swipe-overlay.like');
                    const nopeOverlay = card.querySelector('.swipe-overlay.nope');
                    const superOverlay = card.querySelector('.swipe-overlay.super');
                    
                    if (diffX > 100) {
                        if (likeOverlay) likeOverlay.style.opacity = '1';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    } else if (diffX < -100) {
                        if (nopeOverlay) nopeOverlay.style.opacity = '1';
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    } else if (diffY < -100) {
                        if (superOverlay) superOverlay.style.opacity = '1';
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                    } else {
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    }
                }
            }, { passive: false });
            
            card.addEventListener('touchend', () => {
                if (!startX || !moveX) return;
                
                const diffX = moveX - startX;
                const diffY = moveY - startY;
                const threshold = 100;
                
                // Hide all overlays
                const overlays = card.querySelectorAll('.swipe-overlay');
                overlays.forEach(o => o.style.opacity = '0');
                
                if (Math.abs(diffX) > threshold) {
                    if (diffX > 0) {
                        swipeRight();
                    } else {
                        swipeLeft();
                    }
                } else if (diffY < -threshold) {
                    superLike();
                } else {
                    card.style.transform = '';
                    card.style.opacity = '';
                }
                
                startX = startY = moveX = moveY = null;
            });
            
            // Mouse events for desktop
            card.addEventListener('mousedown', e => {
                startX = e.clientX;
                startY = e.clientY;
                card.style.cursor = 'grabbing';
            });
            
            document.addEventListener('mousemove', e => {
                if (!startX || !startY) return;
                
                moveX = e.clientX;
                moveY = e.clientY;
                const diffX = moveX - startX;
                const diffY = moveY - startY;
                
                if (Math.abs(diffX) > 10) {
                    card.style.transform = `translateX(${diffX}px) rotate(${diffX * 0.1}deg)`;
                    card.style.opacity = 1 - Math.abs(diffX) / 300;
                    
                    // Show swipe overlays
                    const likeOverlay = card.querySelector('.swipe-overlay.like');
                    const nopeOverlay = card.querySelector('.swipe-overlay.nope');
                    const superOverlay = card.querySelector('.swipe-overlay.super');
                    
                    if (diffX > 100) {
                        if (likeOverlay) likeOverlay.style.opacity = '1';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    } else if (diffX < -100) {
                        if (nopeOverlay) nopeOverlay.style.opacity = '1';
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    } else if (diffY < -100) {
                        if (superOverlay) superOverlay.style.opacity = '1';
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                    } else {
                        if (likeOverlay) likeOverlay.style.opacity = '0';
                        if (nopeOverlay) nopeOverlay.style.opacity = '0';
                        if (superOverlay) superOverlay.style.opacity = '0';
                    }
                }
            });
            
            document.addEventListener('mouseup', () => {
                if (!startX || !moveX) return;
                
                const diffX = moveX - startX;
                const diffY = moveY - startY;
                const threshold = 100;
                
                // Hide all overlays
                const overlays = card.querySelectorAll('.swipe-overlay');
                overlays.forEach(o => o.style.opacity = '0');
                
                if (Math.abs(diffX) > threshold) {
                    if (diffX > 0) {
                        swipeRight();
                    } else {
                        swipeLeft();
                    }
                } else if (diffY < -threshold) {
                    superLike();
                } else {
                    card.style.transform = '';
                    card.style.opacity = '';
                }
                
                startX = startY = moveX = moveY = null;
                card.style.cursor = 'grab';
            });
        }

        function swipeLeft() {
            if (!state.isPro && !state.isProPlus && state.swipeCount >= state.dailyLikes) {
                navigateTo('pricing');
                return;
            }
            
            const availableProfiles = MOCK_PROFILES.filter(p => 
                !state.swipeHistory.some(s => s.profile.id === p.id)
            );
            
            if (availableProfiles.length === 0) return;
            
            const profile = availableProfiles[0];
            state.swipeHistory.push({ profile, action: 'reject' });
            state.swipeCount++;
            
            showNotification(`Passed on ${profile.name}`);
            
            localStorage.setItem('amps_swipeCount', state.swipeCount);
            localStorage.setItem('amps_swipeHistory', JSON.stringify(state.swipeHistory));
            
            setTimeout(() => renderSwipePage(document.getElementById('content')), 300);
        }

        function swipeRight() {
            if (!state.isPro && !state.isProPlus && state.swipeCount >= state.dailyLikes) {
                navigateTo('pricing');
                return;
            }
            
            const availableProfiles = MOCK_PROFILES.filter(p => 
                !state.swipeHistory.some(s => s.profile.id === p.id)
            );
            
            if (availableProfiles.length === 0) return;
            
            const profile = availableProfiles[0];
            state.swipeHistory.push({ profile, action: 'like' });
            state.swipeCount++;
            
            if (Math.random() < 0.4) {
                const match = {
                    id: Date.now(),
                    userId: state.currentUser.id,
                    matchId: profile.id,
                    timestamp: new Date().toISOString(),
                    eventId: state.currentEvent?.id,
                    lastMessage: 'You matched! Say hi!',
                    lastMessageTime: 'Just now',
                    unread: true,
                    user: profile
                };
                state.matches.push(match);
                state.lastMatch = profile;
                setTimeout(() => showMatchModal(), 400);
                showNotification(`It's a match with ${profile.name}! `, 'success');
            } else {
                showNotification(`Liked ${profile.name} `);
            }
            
            localStorage.setItem('amps_swipeCount', state.swipeCount);
            localStorage.setItem('amps_swipeHistory', JSON.stringify(state.swipeHistory));
            localStorage.setItem('amps_matches', JSON.stringify(state.matches));
            
            setTimeout(() => renderSwipePage(document.getElementById('content')), 300);
        }

        function superLike() {
            if (!state.isPro && !state.isProPlus && state.superLikes <= 0) {
                navigateTo('pricing');
                return;
            }
            
            const availableProfiles = MOCK_PROFILES.filter(p => 
                !state.swipeHistory.some(s => s.profile.id === p.id)
            );
            
            if (availableProfiles.length === 0) return;
            
            const profile = availableProfiles[0];
            state.swipeHistory.push({ profile, action: 'super' });
            state.swipeCount++;
            if (!state.isPro && !state.isProPlus) {
                state.superLikes--;
            }
            
            // Super like has higher match chance
            if (Math.random() < 0.7) {
                const match = {
                    id: Date.now(),
                    userId: state.currentUser.id,
                    matchId: profile.id,
                    timestamp: new Date().toISOString(),
                    eventId: state.currentEvent?.id,
                    lastMessage: 'You super liked each other!',
                    lastMessageTime: 'Just now',
                    unread: true,
                    user: profile
                };
                state.matches.push(match);
                state.lastMatch = profile;
                setTimeout(() => showMatchModal(), 400);
                showNotification(`Super match with ${profile.name}! `, 'success');
            } else {
                showNotification(`Super liked ${profile.name} `);
            }
            
            localStorage.setItem('amps_swipeCount', state.swipeCount);
            localStorage.setItem('amps_swipeHistory', JSON.stringify(state.swipeHistory));
            localStorage.setItem('amps_matches', JSON.stringify(state.matches));
            localStorage.setItem('amps_superLikes', state.superLikes);
            
            setTimeout(() => renderSwipePage(document.getElementById('content')), 300);
        }

        function undoSwipe() {
            if (state.swipeHistory.length === 0) return;
            if (!state.isPro && !state.isProPlus && state.rewindCount <= 0) {
                showNotification('No rewinds remaining. Upgrade to Pro for unlimited rewinds.', 'warning');
                return;
            }
            
            state.swipeHistory.pop();
            state.swipeCount = Math.max(0, state.swipeCount - 1);
            if (!state.isPro && !state.isProPlus) {
                state.rewindCount--;
            }
            showNotification('Undid last swipe', 'info');
            
            localStorage.setItem('amps_swipeCount', state.swipeCount);
            localStorage.setItem('amps_swipeHistory', JSON.stringify(state.swipeHistory));
            localStorage.setItem('amps_rewindCount', state.rewindCount);
            
            renderSwipePage(document.getElementById('content'));
        }

        function resetSwipes() {
            state.currentProfileIndex = 0;
            state.swipeHistory = [];
            renderSwipePage(document.getElementById('content'));
        }

        function showMatchModal() {
            const modal = document.getElementById('matchModal');
            const matchAvatar = document.getElementById('matchAvatar');
            const userAvatar = document.getElementById('userAvatar');
            const matchMessage = document.getElementById('matchMessage');
            
            if (modal && state.lastMatch) {
                matchAvatar.style.backgroundImage = `url('${state.lastMatch.livePhoto}')`;
                userAvatar.style.backgroundImage = `url('${state.userProfile.profilePhoto}')`;
                matchMessage.textContent = `You and ${state.lastMatch.name} liked each other`;
                modal.style.display = 'flex';
                createConfetti();
            }
        }

        function closeMatchModal() {
            document.getElementById('matchModal').style.display = 'none';
        }

        function startChat() {
            closeMatchModal();
            if (state.lastMatch) {
                const matchId = state.lastMatch.id;
                navigateTo('chat-' + matchId);
            }
        }

        function openChat(matchId) {
            navigateTo('chat-' + matchId);
        }

        function sendMessage(matchId) {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message) {
                if (!state.chatMessages[matchId]) {
                    state.chatMessages[matchId] = [];
                }
                
                const now = new Date();
                const time = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                state.chatMessages[matchId].push({
                    text: message,
                    time: time,
                    sender: 'user'
                });
                
                localStorage.setItem('amps_chatMessages', JSON.stringify(state.chatMessages));
                
                input.value = '';
                renderChatPage(document.getElementById('content'));
                
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                setTimeout(() => {
                    const replies = [
                        'Sounds good!',
                        'Meet by the bar?',
                        'On my way!',
                        'Love that idea!',
                        'See you there! '
                    ];
                    const reply = replies[Math.floor(Math.random() * replies.length)];
                    
                    state.chatMessages[matchId].push({
                        text: reply,
                        time: 'Just now',
                        sender: 'match'
                    });
                    
                    localStorage.setItem('amps_chatMessages', JSON.stringify(state.chatMessages));
                    renderChatPage(document.getElementById('content'));
                    
                    const updatedChatMessages = document.getElementById('chatMessages');
                    updatedChatMessages.scrollTop = updatedChatMessages.scrollHeight;
                }, 1000 + Math.random() * 1000);
            }
        }

        function handleMessageKeypress(event) {
            if (event.key === 'Enter') {
                const matchId = state.currentPage.split('-')[1];
                sendMessage(matchId);
            }
        }

        function createEvent(event) {
            event.preventDefault();
            const form = event.target;
            const eventName = form.querySelector('input[type="text"]').value;
            const description = form.querySelector('textarea').value;
            const location = form.querySelectorAll('input[type="text"]')[1].value;
            const duration = form.querySelector('input[type="number"]').value;
            const maxAttendees = form.querySelectorAll('input[type="number"]')[1].value;
            
            const newEvent = {
                id: state.events.length + 1,
                name: eventName,
                description: description,
                location: location,
                date: 'Tomorrow',
                time: '7:00 PM - 11:00 PM',
                attendees: 0,
                maxAttendees: parseInt(maxAttendees),
                qrCode: 'AMPS_' + Math.random().toString(36).substr(2, 9).toUpperCase(),
                radius: 100,
                organizerId: state.currentUser.id,
                tags: ['New Event']
            };
            
            state.events.push(newEvent);
            
            showNotification(`Event "${eventName}" created successfully!`, 'success');
            
            setTimeout(() => {
                const qrDisplay = document.getElementById('qrDisplay');
                const qrCodeDisplay = document.getElementById('qrCodeDisplay');
                
                if (qrDisplay && qrCodeDisplay) {
                    qrDisplay.style.display = 'block';
                    qrCodeDisplay.textContent = newEvent.qrCode;
                    
                    qrDisplay.scrollIntoView({ behavior: 'smooth' });
                }
            }, 500);
        }

        function upgradeToPro() {
            showNotification('Upgrading to Pro...', 'info');
            setTimeout(() => {
                state.isPro = true;
                state.isProPlus = false;
                localStorage.setItem('amps_isPro', true);
                localStorage.setItem('amps_isProPlus', false);
                showNotification('Pro upgrade successful!', 'success');
                navigateTo('dashboard');
            }, 1500);
        }

        function upgradeToProPlus() {
            showNotification('Upgrading to Pro Plus...', 'info');
            setTimeout(() => {
                state.isPro = false;
                state.isProPlus = true;
                localStorage.setItem('amps_isPro', false);
                localStorage.setItem('amps_isProPlus', true);
                showNotification('Pro Plus upgrade successful!', 'success');
                navigateTo('dashboard');
            }, 1500);
        }

        function showPayment(method) {
            const methods = {
                paypal: 'PayPal',
                card: 'Credit/Debit Card',
                mobile: 'Mobile Money',
                bank: 'Bank Transfer'
            };
            showNotification(`Redirecting to ${methods[method]} payment...`, 'info');
        }

        function enterCodeManually() {
            const code = prompt('Enter event code:');
            if (code) {
                showNotification('Code accepted! Opening camera for verification...', 'success');
                setTimeout(() => openCameraForSelfie(), 1000);
            }
        }

        function showMenuModal() {
            const modal = document.createElement('div');
            modal.className = 'menu-modal';
            modal.style.cssText = `
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 2000;
                backdrop-filter: blur(10px);
            `;
            
            modal.innerHTML = `
                <div class="card" style="max-width: 320px; width: 90%;">
                    <h2 class="mb-2">Menu</h2>
                    <p class="text-gray-400 mb-4">Hi, ${state.currentUser?.name || 'Guest'}!</p>
                    <div class="flex flex-col gap-3">
                        <button class="btn btn-outline" onclick="navigateTo('dashboard'); this.closest('.menu-modal').remove()">
                            <i class="fas fa-calendar"></i> Browse Events
                        </button>
                        <button class="btn btn-outline" onclick="navigateTo('matches'); this.closest('.menu-modal').remove()">
                            <i class="fas fa-heart"></i> My Matches (${state.matches.length})
                        </button>
                        <button class="btn btn-outline" onclick="navigateTo('profile'); this.closest('.menu-modal').remove()">
                            <i class="fas fa-user"></i> Profile
                        </button>
                        <button class="btn btn-outline text-red-400" onclick="logout(); this.closest('.menu-modal').remove()">
                            <i class="fas fa-sign-out-alt"></i> Log Out
                        </button>
                    </div>
                </div>
            `;
            
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
            
            document.body.appendChild(modal);
        }

        function logout() {
            state.currentUser = null;
            state.isPro = false;
            state.isProPlus = false;
            state.swipeCount = 0;
            state.matches = [];
            state.chatMessages = {};
            
            localStorage.removeItem('amps_user');
            localStorage.removeItem('amps_isPro');
            localStorage.removeItem('amps_isProPlus');
            localStorage.removeItem('amps_swipeCount');
            localStorage.removeItem('amps_matches');
            localStorage.removeItem('amps_chatMessages');
            
            showNotification('Successfully signed out', 'info');
            navigateTo('home');
        }

        function editProfile() {
            showNotification('Edit profile feature coming soon!', 'info');
        }

        function showNotificationSettings() {
            showNotification('Notification settings coming soon!', 'info');
        }

        function showPrivacySettings() {
            showNotification('Privacy settings coming soon!', 'info');
        }

        function showHelp() {
            showNotification('Help & support coming soon!', 'info');
        }

        function changeProfilePhoto() {
            showNotification('Profile photo upload coming soon!', 'info');
        }

        function showProfileViews() {
            showNotification('Profile views feature for Pro users!', 'info');
        }

        function showFilters() {
            showNotification('Filter options coming soon!', 'info');
        }

        function viewFullProfile(profileId) {
            const profile = MOCK_PROFILES.find(p => p.id === profileId);
            if (profile) {
                alert(`Full Profile:\n\nName: ${profile.name}\nAge: ${profile.age}\nBio: ${profile.bio}\nLocation: ${profile.location}\nInterests: ${profile.interests.join(', ')}`);
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function showNotification(message, type = 'info') {
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle';
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100px)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            document.body.removeChild(notification);
                        }
                    }, 300);
                }
            }, 3000);
        }

        function createConfetti() {
            const modal = document.getElementById('matchModal');
            if (!modal) return;
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: hsl(${Math.random() * 360}, 100%, 70%);
                    border-radius: 50%;
                    top: 50%;
                    left: ${Math.random() * 100}%;
                    animation: confettiFall ${Math.random() * 2 + 1}s linear forwards;
                `;
                
                modal.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // ===== INITIALIZATION =====
        function init() {
            const savedUser = localStorage.getItem('amps_user');
            const savedPro = localStorage.getItem('amps_isPro');
            const savedProPlus = localStorage.getItem('amps_isProPlus');
            const savedSwipeCount = localStorage.getItem('amps_swipeCount');
            const savedMatches = localStorage.getItem('amps_matches');
            const savedChatMessages = localStorage.getItem('amps_chatMessages');
            const savedSwipeHistory = localStorage.getItem('amps_swipeHistory');
            const savedUserProfile = localStorage.getItem('amps_userProfile');
            const savedSuperLikes = localStorage.getItem('amps_superLikes');
            const savedRewindCount = localStorage.getItem('amps_rewindCount');
            
            if (savedUser) {
                state.currentUser = JSON.parse(savedUser);
            }
            
            if (savedPro) {
                state.isPro = savedPro === 'true';
            }
            
            if (savedProPlus) {
                state.isProPlus = savedProPlus === 'true';
            }
            
            if (savedSwipeCount) {
                state.swipeCount = parseInt(savedSwipeCount);
            }
            
            if (savedMatches) {
                state.matches = JSON.parse(savedMatches);
            }
            
            if (savedChatMessages) {
                state.chatMessages = JSON.parse(savedChatMessages);
            }
            
            if (savedSwipeHistory) {
                state.swipeHistory = JSON.parse(savedSwipeHistory);
            }
            
            if (savedUserProfile) {
                state.userProfile = JSON.parse(savedUserProfile);
            }
            
            if (savedSuperLikes) {
                state.superLikes = parseInt(savedSuperLikes);
            }
            
            if (savedRewindCount) {
                state.rewindCount = parseInt(savedRewindCount);
            }
            
            const today = new Date().toDateString();
            if (localStorage.getItem('lastSwipeDate') !== today) {
                state.swipeCount = 0;
                state.superLikes = state.isPro || state.isProPlus ? 5 : 1;
                state.rewindCount = state.isPro || state.isProPlus ? 999 : 1;
                localStorage.setItem('lastSwipeDate', today);
            }
            
            renderPage();
            updateNavigation();
        }

        document.addEventListener('DOMContentLoaded', init);

        // Export functions for HTML onclick handlers
        window.navigateTo = navigateTo;
        window.goBack = goBack;
        window.demoLogin = demoLogin;
        window.upgradeToPro = upgradeToPro;
        window.upgradeToProPlus = upgradeToProPlus;
        window.showPayment = showPayment;
        window.logout = logout;
        window.joinEvent = joinEvent;
        window.viewEvent = viewEvent;
        window.startCameraScanning = startCameraScanning;
        window.enterCodeManually = enterCodeManually;
        window.openCameraForSelfie = openCameraForSelfie;
        window.closeCamera = closeCamera;
        window.switchCamera = switchCamera;
        window.takePhoto = takePhoto;
        window.swipeLeft = swipeLeft;
        window.swipeRight = swipeRight;
        window.superLike = superLike;
        window.undoSwipe = undoSwipe;
        window.resetSwipes = resetSwipes;
        window.closeMatchModal = closeMatchModal;
        window.startChat = startChat;
        window.openChat = openChat;
        window.sendMessage = sendMessage;
        window.handleMessageKeypress = handleMessageKeypress;
        window.createEvent = createEvent;
        window.switchAuthTab = switchAuthTab;
        window.handleAuth = handleAuth;
        window.showMenuModal = showMenuModal;
        window.editProfile = editProfile;
        window.showNotificationSettings = showNotificationSettings;
        window.showPrivacySettings = showPrivacySettings;
        window.showHelp = showHelp;
        window.changeProfilePhoto = changeProfilePhoto;
        window.showProfileViews = showProfileViews;
        window.showFilters = showFilters;
        window.viewFullProfile = viewFullProfile;
    </script>
</body>
</html>
